@(user: models.user.User, cs: models.connection.ConnectionSettings, cfg: com.databaseflow.models.scalaexport.db.config.ExportConfiguration, schema: models.schema.Schema)(
    implicit request: Request[AnyContent], session: Session, flash: Flash, message: Messages
)
@chk(b: Boolean) = {@{if(b) { "checked=\"checked\"" } else { "" }}}
@layout.admin(user = user, title = s"${cfg.projectTitle} Scala Export", activeSection = "") {
<form method="post" action="@controllers.admin.routes.ScalaExportController.export(cs.slug)">
  <div class="row">
    <div class="col s12">
      <div class="right"><button class="btn theme" type="submit">Run Export</button></div>
      <h5>Scala Project Export</h5>
    </div>
    <div class="col s12">
      <div class="z-depth-1" style="padding: 4px 12px 12px 12px; margin: 12px 0;">
        <h5>Instructions</h5>

        @if(cfg.isDefault) {
          <p>
            It looks like this is your first time exporting this project.
            To proceed, set a package for each model listed below, and make sure the settings in the top section are correct.
          </p>
        }
        <p>
          Each icon and title in the list below is an expandable section.
          The top section controls export settings, while the table and view sections are each clickable, allowing you to control how the object is exported.
          Of particular note is "Package", which controls the location of output files, and "Plural", which controls plural identifiers.
        </p>
      </div>
    </div>
    <div class="col s12">
        <ul class="collapsible" data-collapsible="expandable">
          <li>
            <div class="collapsible-header">
              <i class="fa @models.template.Icons.database"></i> @cs.name
            </div>
            <div class="collapsible-body with-padding">
              <table class="">
                <tbody>
                  <tr>
                    <th>Project ID</th>
                    <td><input name="project.id" class="validate" value="@cfg.projectId" /></td>
                    <td><i class="fa @models.template.Icons.help" title="This is the core id used for many project references"></i></td>
                  </tr>
                  <tr>
                    <th>Project Title</th>
                    <td><input name="project.title" class="validate" value="@cfg.projectTitle" /></td>
                    <td><i class="fa @models.template.Icons.help" title="The name of the project"></i></td>
                  </tr>
                  <tr>
                    <th>Project Location</th>
                    <td><input name="project.location" class="validate" value="@cfg.projectLocation" /></td>
                    <td><i class="fa @models.template.Icons.help" title="Full or relative path to the project output directory"></i></td>
                  </tr>
                  <tr>
                    <th>Provided Package Override</th>
                    <td><input name="project.providedPackage" class="validate" value="@cfg.providedPackage" /></td>
                    <td><i class="fa @models.template.Icons.help" title="The package used for expected and dependent classes (defaults to root directory)"></i></td>
                  </tr>
                  <tr>
                    <th>Core Package</th>
                    <td><input name="project.corePackage" class="validate" value="@cfg.corePackage" /></td>
                    <td><i class="fa @models.template.Icons.help" title="Package of core files, such as models and serializers"></i></td>
                  </tr>
                  <tr>
                    <th>Core Location</th>
                    <td><input name="project.coreLocation" class="validate" value="@cfg.coreLocation" /></td>
                    <td><i class="fa @models.template.Icons.help" title="Full or relative path to the directory where core files are written"></i></td>
                  </tr>
                  <tr>
                    <th>Model Location Override</th>
                    <td><input name="model.location" class="validate" value="@cfg.modelLocationOverride" /></td>
                    <td><i class="fa @models.template.Icons.help" title="Splits the models from dependent files, writing them to this path"></i></td>
                  </tr>
                  <tr>
                    <th>Thrift Location Override</th>
                    <td><input name="thrift.location" class="validate" value="@cfg.thriftLocationOverride" /></td>
                    <td><i class="fa @models.template.Icons.help" title="Location of thrift output files"></i></td>
                  </tr>
                  <tr>
                    <th>Wiki Location</th>
                    <td><input name="wiki.location" class="validate" value="@cfg.wikiLocation" /></td>
                    <td><i class="fa @models.template.Icons.help" title="Location to write the wiki Markdown files"></i></td>
                  </tr>
                  <tr>
                    <th>Flags</th>
                    <td>
                      @com.databaseflow.models.scalaexport.db.config.ExportFlag.values.map { f =>
                        <div>
                        <input name="project.flags" id="project.flags.@f" type="checkbox" value="@f.value" @chk(cfg.flag(f)) />
                        <label for="project.flags.@f">@f</label>
                        <i class="fa @models.template.Icons.help" title="@f.description"></i>
                        </div>
                      }
                    </td>
                  </tr>
                  <tr>
                    <th>Project Source</th>
                    <td><select name="project.source">
                      @if(cfg.source == "boilerplay") {
                        <option value="boilerplay" selected="selected">Boilerplay</option>
                      } else {
                        <option value="boilerplay">Boilerplay</option>
                      }
                    </select></td>
                    <td><i class="fa @models.template.Icons.help" title="Project to be checked out (only used for initial export)"></i></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </li>
          @views.html.admin.scalaExport.enumForm(cfg.enums, schema.enums)
          @schema.tables.map { table =>
            @views.html.admin.scalaExport.modelForm(
              config = cfg,
              model = cfg.getModelOptWithIgnored(table.name).getOrElse(com.databaseflow.models.scalaexport.db.config.ExportConfigurationDefaultTable.loadTableModel(schema, table, cfg.enums))
            )
          }
          @schema.views.map { view =>
            @views.html.admin.scalaExport.modelForm(
              config = cfg,
              model = cfg.getModelOptWithIgnored(view.name).getOrElse(com.databaseflow.models.scalaexport.db.config.ExportConfigurationDefaultView.loadViewModel(schema, view, cfg.enums))
            )
          }
        </ul>
      </div>
    </div>
  </form>
  <script>
    $(document).ready(function() {
      $('select').material_select();
    });
  </script>
}
